
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;curl&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-e1fcda57.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="curl">curl</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#sso" class="toc-h1 toc-link" data-title="SSO">SSO</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#thanx-hosted-sso-form" class="toc-h2 toc-link" data-title="Thanx-hosted SSO Form">Thanx-hosted SSO Form</a>
                  </li>
                  <li>
                    <a href="#self-hosted-sso-form" class="toc-h2 toc-link" data-title="Self-hosted SSO Form">Self-hosted SSO Form</a>
                  </li>
                  <li>
                    <a href="#send-user-to-authentication-flow" class="toc-h2 toc-link" data-title="Send user to authentication flow">Send user to authentication flow</a>
                  </li>
                  <li>
                    <a href="#acquire-authorization-code" class="toc-h2 toc-link" data-title="Acquire authorization code">Acquire authorization code</a>
                  </li>
                  <li>
                    <a href="#acquire-access-token" class="toc-h2 toc-link" data-title="Acquire access token">Acquire access token</a>
                  </li>
                  <li>
                    <a href="#revoke-access-token" class="toc-h2 toc-link" data-title="Revoke Access Token">Revoke Access Token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#identity" class="toc-h1 toc-link" data-title="Identity">Identity</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-user" class="toc-h2 toc-link" data-title="Create user">Create user</a>
                  </li>
                  <li>
                    <a href="#describe-user" class="toc-h2 toc-link" data-title="Describe user">Describe user</a>
                  </li>
                  <li>
                    <a href="#describe-users" class="toc-h2 toc-link" data-title="Describe users">Describe users</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update user">Update user</a>
                  </li>
                  <li>
                    <a href="#create-access-token" class="toc-h2 toc-link" data-title="Create access token">Create access token</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.thanx.com/' target='_blank'>thanx.com</a></li>
            <li><a href='mailto:developer-support@thanx.com' target='_blank'>Contact Developer Support</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<blockquote>
<p>API Endpoints</p>
</blockquote>
<pre class="highlight plaintext"><code>https://auth.thanxsandbox.com
https://merchant.thanxsandbox.io
</code></pre>
<p>Thanx provides a number of ways to integrate with the Thanx platform, including
a number of authentication mechanisms and a powerful REST API.</p>

<p>This API reference provides information on available endpoints and how to
interact with them.</p>
<h1 id='sso'>SSO</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://auth.thanxsandbox.com
</code></pre>
<p>This section describes the process of authenticating with Thanx via Thanx
SSO. Thanx SSO authenticates the user via a password-less flow using email
authentication, rather than a password. This reduces the friction of a user
having to manage yet another password as well as reduces the friction of
transitioning an existing user-base to Thanx.</p>

<p>Thanx follows the standard OAuth 2.0 spec, using the Authorization Code grant
type. Refer to the
<a href="https://tools.ietf.org/html/rfc6749#section-4.1">OAuth 2.0 Authorization Framework RFC: Section 4.1</a>
for additional details.</p>

<p>There are two primary options for implementing SSO with Thanx:</p>

<ul>
<li>Thanx-hosted SSO Form</li>
<li>Self-hosted SSO Form</li>
</ul>
<h2 id='thanx-hosted-sso-form'>Thanx-hosted SSO Form</h2>
<p><img src="images/sso/thanx-hosted-form-1b5e7315.png" alt="SSO with Thanx-hosted Form" /></p>

<ol>
<li>User navigates to the merchant website and clicks an authentication button.</li>
<li>The merchant website redirects to Thanx Auth, as described in the
<code>GET /oauth/authorize</code> endpoint described below.</li>
<li>User enters their email address in the Thanx-hosted form.</li>
<li>If the email address is new to Thanx, the user is prompted to input their
first and last name to create an account, after which an authorization code is
returned to the <code>redirect_uri</code> (skip to step 6). If the email address already
exists in Thanx, Thanx Auth sends an auth email to the specified email.</li>
<li>The user clicks the auth email link which redirects to the merchant website
at the specified <code>redirect_uri</code> with an authorization code in the params.</li>
<li>Merchant website exchanges the authorization code for an access token via
the POST /oauth/token endpoint described below. User is now authenticated with
the Thanx system through the returned access token.</li>
</ol>
<h2 id='self-hosted-sso-form'>Self-hosted SSO Form</h2>
<p><img src="images/sso/self-hosted-form-new-65c29852.png" alt="SSO with Self-hosted Form - New User" />
<img src="images/sso/self-hosted-form-existing-bd5a2fe5.png" alt="SSO with Self-hosted Form - Existing User" /></p>

<ol>
<li>User navigates to the merchant website and clicks an authentication button.</li>
<li>The merchant website prompts the user to input an email address</li>
<li>The merchant website makes a request to the <code>POST /oauth/authorize</code> endpoint
described below. <em>(Continue to #4 or #5)</em></li>
<li>If no account exists for the specified email address, a 401 error is thrown.
The merchant website should then reprompt the user to input a first and last
name and resend the request to <code>POST /oauth/authorize</code> with the <code>first_name</code>
and <code>last_name</code> parameters. Upon successful creation of the user, a 201 HTTP
response is returned with an authorization code in the response body.
<em>(Continue to #6)</em></li>
<li>If an account exists for the specified email address, an auth email is sent
to specified email. The user clicks the auth email link which redirects to the
merchant website at the specified <code>redirect_uri</code> with an authorization code in
the params.</li>
<li>Merchant website exchanges the authorization code for an access token via
the <code>POST /oauth/token</code> endpoint described below. User is now authenticated
with the Thanx system through the returned access token.</li>
</ol>
<h2 id='send-user-to-authentication-flow'>Send user to authentication flow</h2>
<blockquote>
<p>Example Entrypoint</p>
</blockquote>
<pre class="highlight shell"><code>https://auth.thanxsandbox.com/oauth/authorize?<span class="se">\</span>
  <span class="nv">response_type</span><span class="o">=</span>code&amp;<span class="se">\</span>
  <span class="nv">client_id</span><span class="o">=</span>abcdefghijklmnop0123456789&amp;<span class="se">\</span>
  <span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fwww.yourdomain.com%2Foauth%2Fcallback
</code></pre>
<p>This is the initial entrance into the authentication flow, rather than an API
endpoint. This is where your &#39;Login with Thanx&#39; button should link to. Be sure
to escape your redirect uri! You will receive a callback at the redirect_url
specified with the session code in the parameters after authentication is
completed.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /oauth/authorize</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>response_type</code></td>
<td>string</td>
<td>Required</td>
<td>This should be <code>code</code></td>
</tr>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>This is your client ID</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>A redirect_uri (escaped!) where Thanx will redirect to once the user has authenticated. This must be part of a whitelist in Thanx.</td>
</tr>
</tbody></table>
<h2 id='acquire-authorization-code'>Acquire authorization code</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/authorize <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "redirect_uri": "https://www.example.com/oauth/callback",
    "response_type": "code",
    "scope": "passwordless",
    "username": "john.smith@example.com",
    "first_name": "John",
    "last_name": "Smith"
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight plaintext"><code>""
</code></pre>
<blockquote>
<p>Response (201 Created)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c13a4ba07f27cfc69a03a5c9cda630205e5f2833331fb761d38eef10c091f371"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (401 Unauthorized)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_denied"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The resource owner or authorization server denied the request."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This flow is to support passwordless login.</p>

<p>If an account exists, an authentication email will be sent including a link that will eventually redirect to the redirect_uri with an authorization code.</p>

<p>If an account does not exist for the specified email, a 401 error will be returned.</p>

<p>If the optionally specified first_name and last_name parameters are included, an attempt to create an account will be made if the email does not already have an associated account. Upon success, a 201 success and an authorization code will be returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/authorize</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>Where you want the user to be redirected.</td>
</tr>
<tr>
<td><code>response_type</code></td>
<td>string</td>
<td>Required</td>
<td><code>code</code> is the required value</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>Required</td>
<td><code>passwordless</code> is the required value</td>
</tr>
<tr>
<td><code>username</code></td>
<td>string</td>
<td>Required</td>
<td>The user&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s first name (Optionally specified for user creation)</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s last name (Optionally specified for user creation)</td>
</tr>
</tbody></table>
<h2 id='acquire-access-token'>Acquire access token</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/token <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
  {
    "grant_type": "authorization_code",
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "client_secret": "83c08861ce6302e0e73d28cea30aa3f8f3ea98446e133fde60a86231f50f5c82",
    "code": "c13a4ba07f27cfc69a03a5c9cda630205e5f2833331fb761d38eef10c091f371",
    "redirect_uri": "https://www.example.com/oauth/callback"
  }
</span></code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"passwordless"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1577836800</span><span class="p">,</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c74334301a7c74d21b714c905fd3047177dab56de6a86899e6f6b7f71bab7d55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to acquire a user&#39;s access token. This same endpoint supports refreshing an access token using the client_id, client_secret, and refresh_token, with grant_type set to <code>refresh_token</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/token</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>grant_type</code></td>
<td>string</td>
<td>Required</td>
<td><code>authorization_code</code> is the required value</td>
</tr>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>client_secret</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client Secret</td>
</tr>
<tr>
<td><code>code</code></td>
<td>string</td>
<td>Required</td>
<td>The authorization code received from Thanx via redirect or API</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>The same redirect_uri should be used as in the request for the authorization code</td>
</tr>
</tbody></table>
<h2 id='revoke-access-token'>Revoke Access Token</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/revoke <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "client_secret": "83c08861ce6302e0e73d28cea30aa3f8f3ea98446e133fde60a86231f50f5c82",
    "token": "945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to revoke a user&#39;s access token.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/revoke</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>client_secret</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client Secret</td>
</tr>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Access Token</td>
</tr>
</tbody></table>
<h1 id='identity'>Identity</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://merchant.thanxsandbox.io
</code></pre>
<p>These APIs enable merchants to fully own their users by providing the ability to create user records on the Thanx platform and transparently authenticate them. This enables merchants to embed the Thanx consumer experience into merchant-owned mobile or web experiences without requiring end-users to re-authenticate with Thanx.</p>
<h2 id='create-user'>Create user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
  -d <span class="s1">'{
    "user": {
      "email": "john.smith@example.com",
      "first_name": "John",
      "last_name": "Smith",
      "birth_date": "1980-01-15"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (201 Created)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"oauth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1577836800</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (400 Bad Request)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid user birthday"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (409 Conflict)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A user with that email already exists"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allow creation of users. Users that are created by this mechanism are automatically associated with the specified merchant. If this specified merchant attempts to create a user with an email that is already in the Thanx system but not yet associated with the merchant, the request will succeed and return a user identifier that is consistent across merchants. If the user is either new to Thanx or new to the merchant, an access token payload will also be part of the response only if using the <code>api</code> scope.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /merchants/:merchant_id/users</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h2 id='describe-user'>Describe user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users/2 <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (404 Not Found)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">""</span><span class="w">
</span></code></pre>
<p>This endpoint will return the specified user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /merchants/:merchant_id/users/:user_id</code></p>
<h2 id='describe-users'>Describe users</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will return a paginated list of users associated with the merchant</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /merchants/:merchant_id/users</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>Scope list of users by email</td>
</tr>
<tr>
<td><code>page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Page of results to return</td>
</tr>
<tr>
<td><code>per_page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Number of results to return per page (1 to 100)</td>
</tr>
</tbody></table>
<h2 id='update-user'>Update user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "user": {
      "id": "fgr2349gh",
      "email": "jane.smith@example.com",
      "first_name": "Jane"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint updates the specified user&#39;s information.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /merchants/:merchant_id/users/:user_id</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h2 id='create-access-token'>Create access token</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users/2/token <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{ "scope": "web" }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1577836800</span><span class="p">,</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will create and return an access token for the user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /merchants/:merchant_id/users/:user_id</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>Required</td>
<td><code>sdk</code> for SDK - multi-use and long-lived<br><code>web</code> for web embed - single-use and short-lived</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="curl">curl</a>
          </div>
      </div>
    </div>
  </body>
</html>
