
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;curl&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-e1fcda57.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="curl">curl</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#sso" class="toc-h1 toc-link" data-title="SSO">SSO</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#thanx-hosted-sso-form" class="toc-h2 toc-link" data-title="Thanx-hosted SSO Form">Thanx-hosted SSO Form</a>
                  </li>
                  <li>
                    <a href="#self-hosted-sso-form" class="toc-h2 toc-link" data-title="Self-hosted SSO Form">Self-hosted SSO Form</a>
                  </li>
                  <li>
                    <a href="#send-user-to-authentication-flow" class="toc-h2 toc-link" data-title="Send user to authentication flow">Send user to authentication flow</a>
                  </li>
                  <li>
                    <a href="#acquire-authorization-code" class="toc-h2 toc-link" data-title="Acquire authorization code">Acquire authorization code</a>
                  </li>
                  <li>
                    <a href="#acquire-access-token" class="toc-h2 toc-link" data-title="Acquire access token">Acquire access token</a>
                  </li>
                  <li>
                    <a href="#revoke-access-token" class="toc-h2 toc-link" data-title="Revoke Access Token">Revoke Access Token</a>
                  </li>
                  <li>
                    <a href="#describe-user" class="toc-h2 toc-link" data-title="Describe User">Describe User</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#identity" class="toc-h1 toc-link" data-title="Identity">Identity</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-user" class="toc-h2 toc-link" data-title="Create user">Create user</a>
                  </li>
                  <li>
                    <a href="#describe-user" class="toc-h2 toc-link" data-title="Describe user">Describe user</a>
                  </li>
                  <li>
                    <a href="#describe-users" class="toc-h2 toc-link" data-title="Describe users">Describe users</a>
                  </li>
                  <li>
                    <a href="#update-user" class="toc-h2 toc-link" data-title="Update user">Update user</a>
                  </li>
                  <li>
                    <a href="#create-access-token" class="toc-h2 toc-link" data-title="Create access token">Create access token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#ordering-loyalty-integration" class="toc-h1 toc-link" data-title="Ordering / Loyalty Integration">Ordering / Loyalty Integration</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#custom-ordering-ui" class="toc-h2 toc-link" data-title="Custom Ordering UI">Custom Ordering UI</a>
                  </li>
                  <li>
                    <a href="#headers" class="toc-h2 toc-link" data-title="Headers">Headers</a>
                  </li>
                  <li>
                    <a href="#retrieve-account" class="toc-h2 toc-link" data-title="Retrieve Account">Retrieve Account</a>
                  </li>
                  <li>
                    <a href="#create-basket" class="toc-h2 toc-link" data-title="Create Basket">Create Basket</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#purchase" class="toc-h1 toc-link" data-title="Purchase">Purchase</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-purchase" class="toc-h2 toc-link" data-title="Create Purchase">Create Purchase</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#consumer" class="toc-h1 toc-link" data-title="Consumer">Consumer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#describe-current-user" class="toc-h2 toc-link" data-title="Describe Current User">Describe Current User</a>
                  </li>
                  <li>
                    <a href="#update-current-user" class="toc-h2 toc-link" data-title="Update Current User">Update Current User</a>
                  </li>
                  <li>
                    <a href="#describe-cards" class="toc-h2 toc-link" data-title="Describe Cards">Describe Cards</a>
                  </li>
                  <li>
                    <a href="#create-card" class="toc-h2 toc-link" data-title="Create Card">Create Card</a>
                  </li>
                  <li>
                    <a href="#delete-card" class="toc-h2 toc-link" data-title="Delete Card">Delete Card</a>
                  </li>
                  <li>
                    <a href="#describe-purchases" class="toc-h2 toc-link" data-title="Describe Purchases">Describe Purchases</a>
                  </li>
                  <li>
                    <a href="#describe-feedback" class="toc-h2 toc-link" data-title="Describe Feedback">Describe Feedback</a>
                  </li>
                  <li>
                    <a href="#update-feedback" class="toc-h2 toc-link" data-title="Update Feedback">Update Feedback</a>
                  </li>
                  <li>
                    <a href="#describe-rewards" class="toc-h2 toc-link" data-title="Describe Rewards">Describe Rewards</a>
                  </li>
                  <li>
                    <a href="#activate-reward" class="toc-h2 toc-link" data-title="Activate Reward">Activate Reward</a>
                  </li>
                  <li>
                    <a href="#finalize-reward" class="toc-h2 toc-link" data-title="Finalize Reward">Finalize Reward</a>
                  </li>
                  <li>
                    <a href="#describe-loyalty" class="toc-h2 toc-link" data-title="Describe Loyalty">Describe Loyalty</a>
                  </li>
                  <li>
                    <a href="#describe-tiers" class="toc-h2 toc-link" data-title="Describe Tiers">Describe Tiers</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.thanx.com/' target='_blank'>About Thanx</a></li>
            <li><a href='mailto:developer-support@thanx.com'>Contact Developer Support</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Thanx provides a number of ways to integrate with the Thanx platform, including
a number of authentication mechanisms and a powerful REST API.</p>

<p>This API reference provides information on available endpoints and how to
interact with them.</p>
<h1 id='sso'>SSO</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://auth.thanxsandbox.com
</code></pre>
<p>This section describes the process of authenticating with Thanx via Thanx
SSO. Thanx SSO authenticates the user via a password-less flow using email
authentication, rather than a password. This reduces the friction of a user
having to manage yet another password as well as reduces the friction of
transitioning an existing user-base to Thanx.</p>

<p>Thanx follows the standard OAuth 2.0 spec, using the Authorization Code grant
type. Refer to the
<a href="https://tools.ietf.org/html/rfc6749#section-4.1">OAuth 2.0 Authorization Framework RFC: Section 4.1</a>
for additional details.</p>

<p>There are two primary options for implementing SSO with Thanx:</p>

<ul>
<li>Thanx-hosted SSO Form</li>
<li>Self-hosted SSO Form</li>
</ul>
<h2 id='thanx-hosted-sso-form'>Thanx-hosted SSO Form</h2>
<p><img src="images/sso/thanx-hosted-form-1b5e7315.png" alt="SSO with Thanx-hosted Form" /></p>

<ol>
<li>User navigates to the merchant website and clicks an authentication button.</li>
<li>The merchant website redirects to Thanx Auth, as described in the
<code>GET /oauth/authorize</code> endpoint described below.</li>
<li>User enters their email address in the Thanx-hosted form.</li>
<li>If the email address is new to Thanx, the user is prompted to input their
first and last name to create an account, after which an authorization code is
returned to the <code>redirect_uri</code> (skip to step 6). If the email address already
exists in Thanx, Thanx Auth sends an auth email to the specified email.</li>
<li>The user clicks the auth email link which redirects to the merchant website
at the specified <code>redirect_uri</code> with an authorization code in the params.</li>
<li>Merchant website exchanges the authorization code for an access token via
the POST /oauth/token endpoint described below. User is now authenticated with
the Thanx system through the returned access token.</li>
</ol>
<h2 id='self-hosted-sso-form'>Self-hosted SSO Form</h2>
<p><img src="images/sso/self-hosted-form-new-65c29852.png" alt="SSO with Self-hosted Form - New User" />
<img src="images/sso/self-hosted-form-existing-bd5a2fe5.png" alt="SSO with Self-hosted Form - Existing User" /></p>

<ol>
<li>User navigates to the merchant website and clicks an authentication button.</li>
<li>The merchant website prompts the user to input an email address</li>
<li>The merchant website makes a request to the <code>POST /oauth/authorize</code> endpoint
described below. <em>(Continue to #4 or #5)</em></li>
<li>If no account exists for the specified email address, a 401 error is thrown.
The merchant website should then reprompt the user to input a first and last
name and resend the request to <code>POST /oauth/authorize</code> with the <code>first_name</code>
and <code>last_name</code> parameters. Upon successful creation of the user, a 201 HTTP
response is returned with an authorization code in the response body.
<em>(Continue to #6)</em></li>
<li>If an account exists for the specified email address, an auth email is sent
to specified email. The user clicks the auth email link which redirects to the
merchant website at the specified <code>redirect_uri</code> with an authorization code in
the params.</li>
<li>Merchant website exchanges the authorization code for an access token via
the <code>POST /oauth/token</code> endpoint described below. User is now authenticated
with the Thanx system through the returned access token.</li>
</ol>

<p>Note that the following notice with links to the Thanx Privacy Policy and Terms
of Service must be displayed in the user experience where a user signs up.</p>

<p><strong>By signing up you agree to our
<a href="https://app.thanx.com/privacy">privacy policy</a>
and our <a href="https://app.thanx.com/terms">terms of service</a></strong></p>
<h2 id='send-user-to-authentication-flow'>Send user to authentication flow</h2>
<blockquote>
<p>Example Entrypoint</p>
</blockquote>
<pre class="highlight shell"><code>https://auth.thanxsandbox.com/oauth/authorize?<span class="se">\</span>
  <span class="nv">response_type</span><span class="o">=</span>code&amp;<span class="se">\</span>
  <span class="nv">client_id</span><span class="o">=</span>abcdefghijklmnop0123456789&amp;<span class="se">\</span>
  <span class="nv">redirect_uri</span><span class="o">=</span>https%3A%2F%2Fwww.yourdomain.com%2Foauth%2Fcallback
</code></pre>
<p>This is the initial entrance into the authentication flow, rather than an API
endpoint. This is where your &#39;Login with Thanx&#39; button should link to. Be sure
to escape your redirect uri! You will receive a callback at the redirect_url
specified with the session code in the parameters after authentication is
completed.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /oauth/authorize</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>response_type</code></td>
<td>string</td>
<td>Required</td>
<td>This should be <code>code</code></td>
</tr>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>This is your client ID</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>A redirect_uri (escaped!) where Thanx will redirect to once the user has authenticated. This must be part of a whitelist in Thanx.</td>
</tr>
</tbody></table>
<h2 id='acquire-authorization-code'>Acquire authorization code</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/authorize <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "redirect_uri": "https://www.example.com/oauth/callback",
    "response_type": "code",
    "scope": "passwordless",
    "username": "john.smith@example.com",
    "first_name": "John",
    "last_name": "Smith",
    "birth_date": "1980-12-15"
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight plaintext"><code>""
</code></pre>
<blockquote>
<p>Response (201 Created)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c13a4ba07f27cfc69a03a5c9cda630205e5f2833331fb761d38eef10c091f371"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (401 Unauthorized)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access_denied"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The resource owner or authorization server denied the request."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This flow is to support passwordless login.</p>

<p>If an account exists, an authentication email will be sent including a link that will eventually redirect to the redirect_uri with an authorization code.</p>

<p>If an account does not exist for the specified email, a 401 error will be returned.</p>

<p>If the optionally specified first_name and last_name parameters are included, an attempt to create an account will be made if the email does not already have an associated account. Upon success, a 201 success and an authorization code will be returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/authorize</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>Where you want the user to be redirected</td>
</tr>
<tr>
<td><code>response_type</code></td>
<td>string</td>
<td>Required</td>
<td><code>code</code> is the required value</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>Required</td>
<td><code>passwordless</code> is the required value</td>
</tr>
<tr>
<td><code>username</code></td>
<td>string</td>
<td>Required</td>
<td>The user&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s first name. Must be specified to trigger user creation</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s last name. Must be specified to trigger user creation</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s birth date. Should be in the format YYYY-MM-DD. Optionally specified during user creation</td>
</tr>
</tbody></table>
<h2 id='acquire-access-token'>Acquire access token</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/token <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
  {
    "grant_type": "authorization_code",
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "client_secret": "83c08861ce6302e0e73d28cea30aa3f8f3ea98446e133fde60a86231f50f5c82",
    "code": "c13a4ba07f27cfc69a03a5c9cda630205e5f2833331fb761d38eef10c091f371",
    "redirect_uri": "https://www.example.com/oauth/callback"
  }
</span></code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"passwordless"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1577836800</span><span class="p">,</span><span class="w">
    </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c74334301a7c74d21b714c905fd3047177dab56de6a86899e6f6b7f71bab7d55"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to acquire a user&#39;s access token. This same endpoint supports refreshing an access token using the client_id, client_secret, and refresh_token, with grant_type set to <code>refresh_token</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/token</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>grant_type</code></td>
<td>string</td>
<td>Required</td>
<td><code>authorization_code</code> is the required value</td>
</tr>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>client_secret</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client Secret</td>
</tr>
<tr>
<td><code>code</code></td>
<td>string</td>
<td>Required</td>
<td>The authorization code received from Thanx via redirect or API</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>string</td>
<td>Required</td>
<td>The same redirect_uri should be used as in the request for the authorization code</td>
</tr>
</tbody></table>
<h2 id='revoke-access-token'>Revoke Access Token</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/oauth/revoke <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "client_id": "f4bf04a6fc27b5fa926a7318933b76440642c25cde037d8e867b3d18d771ad86",
    "client_secret": "83c08861ce6302e0e73d28cea30aa3f8f3ea98446e133fde60a86231f50f5c82",
    "token": "945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>Use this endpoint to revoke a user&#39;s access token.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /oauth/revoke</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client_id</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client ID</td>
</tr>
<tr>
<td><code>client_secret</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Client Secret</td>
</tr>
<tr>
<td><code>token</code></td>
<td>string</td>
<td>Required</td>
<td>OAuth Access Token</td>
</tr>
</tbody></table>
<h2 id='describe-user'>Describe User</h2><pre class="highlight shell"><code>curl https://auth.thanxsandbox.com/users/me <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11650a5cad69"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"birth_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-12-15"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (401 Unauthorized)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">""</span><span class="w">
</span></code></pre>
<p>This endpoint will return info for the authorized user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /users/me</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Thanx User UID</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>string</td>
<td>Thanx User Identifier</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>The user&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>The user&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>The user&#39;s last name</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
</tr>
</tbody></table>
<h1 id='identity'>Identity</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://merchant.thanxsandbox.io
</code></pre>
<p>These APIs enable merchants to fully own their users by providing the ability to create user records on the Thanx platform and transparently authenticate them. This enables merchants to embed the Thanx consumer experience into merchant-owned mobile or web experiences without requiring end-users to re-authenticate with Thanx.</p>
<h2 id='create-user'>Create user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
  -d <span class="s1">'{
    "user": {
      "email": "john.smith@example.com",
      "first_name": "John",
      "last_name": "Smith",
      "birth_date": "1980-12-15"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (201 Created)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (400 Bad Request)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invalid user birthday"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (409 Conflict)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A user with that email already exists"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allow creation of users. Users that are created by this mechanism
are automatically associated with the specified merchant. If this specified
merchant attempts to create a user with an email that is already in the Thanx
system but not yet associated with the merchant, the request will succeed and
return a user identifier that is consistent across merchants.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /merchants/:merchant_id/users</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Required</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>user</code></td>
<td>hash</td>
<td>User info</td>
</tr>
<tr>
<td><code>user.id</code></td>
<td>string</td>
<td>User ID</td>
</tr>
<tr>
<td><code>user.email</code></td>
<td>string</td>
<td>User email address</td>
</tr>
<tr>
<td><code>user.first_name</code></td>
<td>string</td>
<td>User first name</td>
</tr>
<tr>
<td><code>user.last_name</code></td>
<td>string</td>
<td>User last name</td>
</tr>
</tbody></table>
<h2 id='describe-user'>Describe user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users/2 <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (404 Not Found)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">""</span><span class="w">
</span></code></pre>
<p>This endpoint will return the specified user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /merchants/:merchant_id/users/:user_id</code></p>
<h2 id='describe-users'>Describe users</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will return a paginated list of users associated with the merchant</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /merchants/:merchant_id/users</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>Scope list of users by email</td>
</tr>
<tr>
<td><code>page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Page of results to return</td>
</tr>
<tr>
<td><code>per_page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Number of results to return per page (1 to 100)</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>Scope list of users by email</td>
</tr>
<tr>
<td><code>page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Page of results to return</td>
</tr>
<tr>
<td><code>per_page</code></td>
<td>integer</td>
<td>Optional</td>
<td>Number of results to return per page (1 to 100)</td>
</tr>
</tbody></table>
<h2 id='update-user'>Update user</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "user": {
      "id": "fgr2349gh",
      "email": "jane.smith@example.com",
      "first_name": "Jane"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint updates the specified user&#39;s information.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /merchants/:merchant_id/users/:user_id</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s email address</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h2 id='create-access-token'>Create access token</h2><pre class="highlight shell"><code>curl https://merchant.thanxsandbox.io/merchants/1/users/2/token <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{ "scope": "web" }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1577836800</span><span class="p">,</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will create and return an access token for the user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /merchants/:merchant_id/users/:user_id</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>scope</code></td>
<td>string</td>
<td>Required</td>
<td><code>sdk</code> for SDK - multi-use and long-lived<br><code>web</code> for web embed - single-use and short-lived</td>
</tr>
</tbody></table>
<h1 id='ordering-loyalty-integration'>Ordering / Loyalty Integration</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://loyalty.thanxsandbox.com/api
</code></pre>
<p>This section describes API endpoints that enable an online ordering platform to
integrate with Thanx. This API provides a way to retrieve a user&#39;s rewards and
apply discounts to their basket. An online ordering platform with a Thanx
merchant as a customer can use this API to allow Thanx users to use their
discounts when making purchases online. The <code>GET /account</code> endpoint provides a
user&#39;s available rewards. The <code>POST /baskets</code> endpoint computes a discount and
marks rewards as used in the Thanx system. Integrators are expected to apply
the discount to the basket.</p>
<h2 id='custom-ordering-ui'>Custom Ordering UI</h2>
<blockquote>
<p>Example Olo API requests:</p>
</blockquote>
<pre class="highlight plaintext"><code># Exchange Thanx Token for Olo Token:
POST /users/getorcreate
{
  provider:       'thanx', # name of loyalty provider
  providertoken:  '...',   # thanx access token
  provideruserid: '...'    # thanx user id
}

# Fetch Thanx Rewards:
GET /baskets/{uid}/loyaltyrewards/qualifying?authtoken={olo token}&amp;...
</code></pre>
<p>For merchants looking to build a custom ordering UI, there is no additional
integration work required outside of the <a href="#sso">SSO integration</a>, since
ordering providers like Olo and Brandibble have already built integrations with
Thanx as documented in below.</p>

<p><img src="images/ordering-loyalty/custom-ui-9206b5f8.png" alt="Custom Ordering UI" /></p>

<p>After the custom ordering UI authenticates the Thanx User, the Thanx token is
passed to the ordering provider. The ordering provider in turn uses that access
token to fetch qualifying rewards from the Thanx APIs.</p>
<h2 id='headers'>Headers</h2>
<p>All Ordering / Loyalty integration API endpoints described below must include
the following headers.</p>

<table><thead>
<tr>
<th>Header</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>Authorization</code></td>
<td>string</td>
<td>Required</td>
<td>All Thanx Loyalty API endpoints are protected and must be authorized via end user access tokens. These access tokens can be retrieved through an integration with Thanx SSO. The format of the header should be: <code>Bearer access_token</code></td>
</tr>
<tr>
<td><code>Content-Type</code></td>
<td>string</td>
<td>Required</td>
<td>The only accepted value is <code>application/json</code></td>
</tr>
<tr>
<td><code>Accept</code></td>
<td>string</td>
<td>Required</td>
<td>The Accept header specifies which version of the Thanx API that should be used. The current version is <code>v1</code> for the vendor <code>thanx</code>. This header is required for every request. The value should be <code>application/vnd.thanx-v1+json</code>. Thanx will notify you when a new API version is available.</td>
</tr>
<tr>
<td><code>Merchant-Key</code></td>
<td>string</td>
<td>Required</td>
<td>The Merchant key header identifies the merchant in Thanx. The value for this key will be provided to you by Thanx and is the same in production and sandbox.</td>
</tr>
</tbody></table>
<h2 id='retrieve-account'>Retrieve Account</h2><pre class="highlight shell"><code>curl https://loyalty.thanxsandbox.com/api/account?location_uid<span class="o">=</span>8bda69 <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Merchant-Key: cb71e3"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wer23gtTT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gheTfR"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"minimum"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="s2">"maximum"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
      </span><span class="s2">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A free hamburger"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"redeemable"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amount"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"234234-23423423"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"3458-345345"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"fine_print"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cannot be applied to alcohol"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"progress"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
    </span><span class="s2">"towards"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$5 off next purchase"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (401 Unauthorized)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There was an error authenticating you."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint allows the retrieval of a user account information, including the
user&#39;s rewards. By default, only rewards available to use at the current time
are returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /account</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>location_uid</code></td>
<td>string</td>
<td>Optional</td>
<td>The location identifier; this is what your system uses to identify a location. Providing this information allows Thanx to return rewards that can be used at this location.</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>The identifier for the user&#39;s account</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>The user&#39;s email</td>
</tr>
<tr>
<td><code>rewards</code></td>
<td>array(hash)</td>
<td>The user&#39;s available rewards for the merchant specified in the header. This array can be empty.</td>
</tr>
<tr>
<td><code>rewards.id</code></td>
<td>string</td>
<td>The Reward Identifier</td>
</tr>
<tr>
<td><code>value</code></td>
<td>number</td>
<td>The value of the discount, present for &#39;amount&#39; and &#39;percent&#39; types</td>
</tr>
<tr>
<td><code>minimum</code></td>
<td>number</td>
<td>The minimum spend for this reward, if applicable</td>
</tr>
<tr>
<td><code>maximum</code></td>
<td>number</td>
<td>The maximum discount possible for this reward, if applicable</td>
</tr>
<tr>
<td><code>label</code></td>
<td>string</td>
<td>The reward description</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>The state of the reward (<code>redeemable</code>, <code>unredeemable</code>)</td>
</tr>
<tr>
<td><code>type</code></td>
<td>enum</td>
<td>The type of reward (<code>amount</code>, <code>percent</code>, <code>item</code>)</td>
</tr>
<tr>
<td><code>products</code></td>
<td>array(string)</td>
<td>POS Identifiers for items this discount applies to, if applicable</td>
</tr>
<tr>
<td><code>fine_print</code></td>
<td>string</td>
<td>Any fine print for the reward.</td>
</tr>
<tr>
<td><code>progress</code></td>
<td>hash</td>
<td>A user&#39;s progress toward their next loyalty reward</td>
</tr>
<tr>
<td><code>progress.percentage</code></td>
<td>integer</td>
<td>Percent progress toward the next loyalty reward</td>
</tr>
<tr>
<td><code>progress.towards</code></td>
<td>string</td>
<td>Description of progress toward the next loyalty reward</td>
</tr>
</tbody></table>
<h2 id='create-basket'>Create Basket</h2><pre class="highlight shell"><code>curl https://loyalty.thanxsandbox.com/api/baskets <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.thanx-v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Merchant-Key: cb71e3"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "id": "gwer-werwr-2134-rty",
    "state": "billed",
    "order_timestamp": "2019-05-08T18:02:05Z",
    "location_uid": "LG-567fhwer",
    "rewards": [
      "fheTRR"
    ],
    "payments": [
      {
        "issuer": "visa",
        "last4": "1234",
        "amount": 10.45,
        "authorized_at": "2019-05-07T18:02:05Z"
      }
    ],
    "items": [
      {
        "id": "ng-23492",
        "name": "Cheese Pizza",
        "price": 9.95,
        "categories": [
          "pizza",
          "vegetarian"
        ]
      }
    ],
    "subtotal": 23.45
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fhwerwe-23663-ryryre"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checkout"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.25"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (400 Bad Request)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The reward was not found in our system"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response (401 Unauthorized)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There was an error authenticating you."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint is used to notify Thanx of the states that a basket can be in and
receive reward redemption information in return. A basket can be in one of the
following states:</p>

<ul>
<li><code>checkout</code>

<ul>
<li>refers to any point before the order is placed. Any time the user updates
their basket or rewards, Thanx expects to receive a request to check if
discount information should be updated.</li>
</ul></li>
<li><code>placed</code>

<ul>
<li>refers to when an order has been submitted to the system and a user can no
longer modify their order through the website.</li>
</ul></li>
<li><code>billed</code>

<ul>
<li>refers to when the order has been trasmitted to the POS and the user&#39;s
credit card has been charged.</li>
</ul></li>
<li><code>completed</code>

<ul>
<li>refers to when the order has been made and transferred to the customer.</li>
</ul></li>
<li><code>voided</code>

<ul>
<li>refers to an order that got canceled after entering the placed state and
before entering the billed state.</li>
</ul></li>
<li><code>refunded</code>

<ul>
<li>refers to an order being refunded / canceled any time after it enters the
billed state.</li>
</ul></li>
</ul>

<aside class="notice">
  Thanx will mark a reward as used and grant loyalty reward progress when the
  reward enters the `billed` state.
</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /baskets</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Required</td>
<td>Basket unique ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Required</td>
<td>Basket state (<code>checkout</code>, <code>placed</code>, <code>billed</code>, <code>completed</code>, <code>voided</code>, <code>refunded</code>)</td>
</tr>
<tr>
<td><code>order_timestamp</code></td>
<td>string</td>
<td>Optional</td>
<td>When the order is wanted in (ISO 8601 format). If this timestamp is not provided, Thanx assumes the order is wanted ASAP. Providing this timestamp allows Thanx to determine if a reward will be valid in the future (for example, for a weekend only promotion where the user orders in advance)</td>
</tr>
<tr>
<td><code>location_uid</code></td>
<td>string</td>
<td>Optional</td>
<td>The location identifier; this is what your system uses to identify a location. Providing this information allows Thanx to apply location restricted rewards.</td>
</tr>
<tr>
<td><code>rewards</code></td>
<td>array(string)</td>
<td>Required</td>
<td>Reward IDs to apply to the basket</td>
</tr>
<tr>
<td><code>payments</code></td>
<td>array(hash)</td>
<td>Required</td>
<td>Array of payment methods</td>
</tr>
<tr>
<td><code>payments.issuer</code></td>
<td>string</td>
<td>Required</td>
<td>Issuer of the payment method</td>
</tr>
<tr>
<td><code>payments.last4</code></td>
<td>string</td>
<td>Required</td>
<td>Last 4 digits of the payment method</td>
</tr>
<tr>
<td><code>payments.amount</code></td>
<td>decimal</td>
<td>Required</td>
<td>Amount used for the payment method</td>
</tr>
<tr>
<td><code>payments.authorized_at</code></td>
<td>string</td>
<td>Required</td>
<td>The timestamp of when the authorization was submitted to the issuer, in ISO8601 format</td>
</tr>
<tr>
<td><code>items</code></td>
<td>array(hash)</td>
<td>Required</td>
<td>Array of items</td>
</tr>
<tr>
<td><code>items.id</code></td>
<td>string</td>
<td>Required</td>
<td>Item ID in your system / POS</td>
</tr>
<tr>
<td><code>items.name</code></td>
<td>string</td>
<td>Required</td>
<td>Item name</td>
</tr>
<tr>
<td><code>items.price</code></td>
<td>decimal</td>
<td>Required</td>
<td>Item amount</td>
</tr>
<tr>
<td><code>items.categories</code></td>
<td>array(string)</td>
<td>Optional</td>
<td>categories that describe this item</td>
</tr>
<tr>
<td><code>subtotal</code></td>
<td>decimal</td>
<td>Required</td>
<td>The subtotal of the basket in USD (before taxes &amp; tips)</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Response ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Basket state (<code>checkout</code>, <code>placed</code>, <code>billed</code>, <code>completed</code>, <code>voided</code>, <code>refunded</code>)</td>
</tr>
<tr>
<td><code>discount</code></td>
<td>string</td>
<td>Discount to apply</td>
</tr>
</tbody></table>
<h1 id='purchase'>Purchase</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://transaction.thanxsandbox.com
</code></pre>
<p>This section describes endpoints that enable authorized parties to act as a
data provider to Thanx.</p>

<aside class="notice">
  Note that these APIs are in <b>private beta</b> and are subject to change.
</aside>
<h2 id='create-purchase'>Create Purchase</h2><pre class="highlight shell"><code>curl https://transaction.thanxsandbox.com/purchases <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "purchase": {
      "user_id": "fe7bd47d6284",
      "amount": 15.25,
      "purchased_at": "2020-01-01T20:00:00Z",
      "uid": "29e82ad6-e87e-4cfd-afa1-4944a462d1c1",
      "location_id": "1796409a-ea4d-4ed2-941d-321e99ac3b3c",
      "items": [
        {
          "uid": "bb102d6d-ef3b-4b75-86a3-c2e94297b61f",
          "name": "Spaghetti and Meatballs",
          "quantity": 2
        },
        {
          "uid": "d3ee3d61-80be-4b12-ac2c-9e8523b32d06",
          "name": "Garlic Bread",
          "quantity": 1
        },
        {
          "uid": "aff795ec-6652-4898-82e8-5beb40abcd55",
          "name": "Coke",
          "quantity": 1
        },
        {
          "uid": "480a2734-a5c0-4608-96b7-76ad4b2b3a00",
          "name": "Sprite",
          "quantity": 1
        }
      ]
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">""</span><span class="w">
</span></code></pre>
<p>This endpoint allows creation of a purchase for a specified user.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /purchases</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>purchase.user_id</code></td>
<td>string</td>
<td>Required</td>
<td>Thanx User ID</td>
</tr>
<tr>
<td><code>purchase.amount</code></td>
<td>decimal</td>
<td>Required</td>
<td>Purchase Amount</td>
</tr>
<tr>
<td><code>purchase.purchased_at</code></td>
<td>string</td>
<td>Required</td>
<td>Purchase Timestamp in ISO8601-format</td>
</tr>
<tr>
<td><code>purchase.uid</code></td>
<td>string</td>
<td>Required</td>
<td>Purchase Unique ID</td>
</tr>
<tr>
<td><code>purchase.location_id</code></td>
<td>string</td>
<td>Required</td>
<td>Purchase&#39;s Location ID</td>
</tr>
<tr>
<td><code>purchase.items</code></td>
<td>array</td>
<td>Optional</td>
<td>Purchase&#39;s Items</td>
</tr>
<tr>
<td><code>purchase.items.id</code></td>
<td>string</td>
<td>Required</td>
<td>Item Unique ID</td>
</tr>
<tr>
<td><code>purchase.items.name</code></td>
<td>string</td>
<td>Required</td>
<td>Item Name</td>
</tr>
<tr>
<td><code>purchase.items.quantity</code></td>
<td>integer</td>
<td>Required</td>
<td>Item Quantity</td>
</tr>
</tbody></table>
<h1 id='consumer'>Consumer</h1>
<blockquote>
<p>API Endpoint</p>
</blockquote>
<pre class="highlight plaintext"><code>https://api-v3.thanxsandbox.com
</code></pre>
<p>This section describes endpoints that enable authorized parties to build
their own consumer experience on top of the Thanx platform.</p>

<aside class="notice">
  Note that these APIs are in <b>private beta</b> and are subject to change.
</aside>
<h2 id='describe-current-user'>Describe Current User</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/users/me <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11650a5cad69"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"male"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birth_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-12-15"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will return info for the authorized user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /users/me</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Thanx User UID</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>string</td>
<td>Thanx User Identifier</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>The user&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>The user&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>The user&#39;s last name</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>enum</td>
<td>The user&#39;s gender (<code>male</code>, <code>female</code>, <code>unknown</code>)</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>The user&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h2 id='update-current-user'>Update Current User</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/users/me <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "user": {
      "email": "jane.smith@example.com",
      "first_name": "Jane",
      "gender": "female"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11650a5cad69"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane.smith@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"birth_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-12-15"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will update info for the authorized user</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /users/me</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>Optional</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>enum</td>
<td>Optional</td>
<td>User&#39;s gender (<code>male</code>, <code>female</code>, <code>unknown</code>)</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>Optional</td>
<td>The user&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Thanx User UID</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>string</td>
<td>Thanx User Identifier</td>
</tr>
<tr>
<td><code>email</code></td>
<td>string</td>
<td>User&#39;s email</td>
</tr>
<tr>
<td><code>first_name</code></td>
<td>string</td>
<td>User&#39;s first name</td>
</tr>
<tr>
<td><code>last_name</code></td>
<td>string</td>
<td>User&#39;s last name</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>enum</td>
<td>User&#39;s gender (<code>male</code>, <code>female</code>, <code>unknown</code>)</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>string</td>
<td>User&#39;s birth date in the format YYYY-MM-DD</td>
</tr>
</tbody></table>
<h2 id='describe-cards'>Describe Cards</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/cards <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"cards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92b7b0dac4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01/25"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes all registered cards for the given user.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /cards</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Card ID</td>
</tr>
<tr>
<td><code>last</code></td>
<td>string</td>
<td>Last 4 digits of the card PAN</td>
</tr>
<tr>
<td><code>type</code></td>
<td>enum</td>
<td>Card type (<code>visa</code>, <code>mastercard</code>, <code>amex</code>)</td>
</tr>
<tr>
<td><code>expiration</code></td>
<td>string</td>
<td>Card expiration in the format MM/YY</td>
</tr>
</tbody></table>
<h2 id='create-card'>Create Card</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/cards <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "card": {
      "last4": "1234",
      "type": "visa",
      "expiration": "01/25",
      "encrypted" "..."
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92b7b0dac4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01/25"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint registers a new card with Thanx.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /cards</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>last4</code></td>
<td>string</td>
<td>Required</td>
<td>Last 4 digits of the card PAN</td>
</tr>
<tr>
<td><code>type</code></td>
<td>string</td>
<td>Required</td>
<td>Card type (<code>visa</code>, <code>mastercard</code>, <code>amex</code>)</td>
</tr>
<tr>
<td><code>expiration</code></td>
<td>string</td>
<td>Required</td>
<td>Card expiration in the format MM/YY</td>
</tr>
<tr>
<td><code>encrypted</code></td>
<td>string</td>
<td>Required</td>
<td>Encrypted Card PAN (<strong>Must use Thanx Tokenization SDK for this. No raw PANs should ever be sent to Thanx APIs</strong>)</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Card ID</td>
</tr>
<tr>
<td><code>last</code></td>
<td>string</td>
<td>Last 4 digits of the card PAN</td>
</tr>
<tr>
<td><code>type</code></td>
<td>enum</td>
<td>Card type (<code>visa</code>, <code>mastercard</code>, <code>amex</code>)</td>
</tr>
<tr>
<td><code>expiration</code></td>
<td>string</td>
<td>Card expiration in the format MM/YY</td>
</tr>
</tbody></table>
<h2 id='delete-card'>Delete Card</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/cards/92b7b0dac4 <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{}</span><span class="w">
</span></code></pre>
<p>This endpoint archives a registered card.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>DELETE /cards/:id</code></p>
<h2 id='describe-purchases'>Describe Purchases</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/purchases <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"purchases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92b7b0dac4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"location_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7183da044"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"purchased_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes all available purchases for the given user.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /purchases</code></p>
<h3 id='reward-resource'>Reward Resource</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Reward ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>string</td>
<td>Location ID</td>
</tr>
<tr>
<td><code>activated_at</code></td>
<td>string</td>
<td>Time the purchase was made in ISO8601-format</td>
</tr>
<tr>
<td><code>amount</code></td>
<td>decimal</td>
<td>The purchase amount</td>
</tr>
</tbody></table>
<h2 id='describe-feedback'>Describe Feedback</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/feedback <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"feedback"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"590485d6f0"</span><span class="w">
      </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"location_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="w">
      </span><span class="s2">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-07T20:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rating"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"review"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"purchase"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916895d48a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"purchased_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">16.0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes the user&#39;s current feedback</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /feedback</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Feedback ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>string</td>
<td>Location ID</td>
</tr>
<tr>
<td><code>expires_at</code></td>
<td>string</td>
<td>Time the feedback expires in ISO8601-format</td>
</tr>
<tr>
<td><code>rating</code></td>
<td>integer</td>
<td>NPS score</td>
</tr>
<tr>
<td><code>review</code></td>
<td>string</td>
<td>Customer feedback</td>
</tr>
<tr>
<td><code>purchase.id</code></td>
<td>string</td>
<td>Purchase ID</td>
</tr>
<tr>
<td><code>purchase.purchased_at</code></td>
<td>string</td>
<td>Time the purchase was made in ISO8601-format</td>
</tr>
<tr>
<td><code>purchase.amount</code></td>
<td>decimal</td>
<td>Purchase amount</td>
</tr>
</tbody></table>
<h2 id='update-feedback'>Update Feedback</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/feedback/590485d6f0 <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "feedback": {
      "rating": 10,
      "review": "Lorem ipsum dolor sit amet"
    }
  }'</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"feedback"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"590485d6f0"</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fgr2349gh"</span><span class="w">
    </span><span class="s2">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-07T20:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rating"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"review"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lorem ipsum dolor sit amet"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purchase"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916895d48a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"purchased_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">16.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint will update the user&#39;s feedback</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PATCH /feedback/:id</code></p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>rating</code></td>
<td>integer</td>
<td>Required</td>
<td>NPS Score</td>
</tr>
<tr>
<td><code>review</code></td>
<td>string</td>
<td>Optional</td>
<td>Customer feedback</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Feedback ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>string</td>
<td>Location ID</td>
</tr>
<tr>
<td><code>expires_at</code></td>
<td>string</td>
<td>Time the feedback expires in ISO8601-format</td>
</tr>
<tr>
<td><code>rating</code></td>
<td>integer</td>
<td>NPS score</td>
</tr>
<tr>
<td><code>review</code></td>
<td>string</td>
<td>Customer feedback</td>
</tr>
<tr>
<td><code>purchase.id</code></td>
<td>string</td>
<td>Purchase ID</td>
</tr>
<tr>
<td><code>purchase.purchased_at</code></td>
<td>string</td>
<td>Time the purchase was made in ISO8601-format</td>
</tr>
<tr>
<td><code>purchase.amount</code></td>
<td>decimal</td>
<td>Purchase amount</td>
</tr>
</tbody></table>
<h2 id='describe-rewards'>Describe Rewards</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/rewards <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"222441e34626"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"program_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85133c3c1258"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivered"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"earn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intro"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signing up"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"redeem"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$10 off"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"window"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"redemption_venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fine_print"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example reward fine print"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example staff instructions"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"activated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"retire_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"finalized_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes all available rewards for the given user.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /rewards</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Reward ID</td>
</tr>
<tr>
<td><code>program_id</code></td>
<td>string</td>
<td>Program ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Reward State (<code>delivered</code>, <code>active</code>, <code>finalized</code>)</td>
</tr>
<tr>
<td><code>earn</code></td>
<td>hash</td>
<td>Details of how the reward was earned</td>
</tr>
<tr>
<td><code>earn.type</code></td>
<td>enum</td>
<td>Type of program the reward was earned with</td>
</tr>
<tr>
<td><code>earn.text</code></td>
<td>string</td>
<td>Description of how the reward was earned</td>
</tr>
<tr>
<td><code>redeem</code></td>
<td>hash</td>
<td>Details of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.type</code></td>
<td>enum</td>
<td>How the reward can be redeemed (<code>manual</code>, <code>automatic</code>, <code>multiple</code>)</td>
</tr>
<tr>
<td><code>redeem.text</code></td>
<td>string</td>
<td>Description of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.window</code></td>
<td>integer</td>
<td>Number of minutes the reward is available for use after activation</td>
</tr>
<tr>
<td><code>coupon_code.code</code></td>
<td>string</td>
<td>The raw coupon code value that should be rendered based on the <code>coupon_code_type</code> enum</td>
</tr>
<tr>
<td><code>coupon_code.type</code></td>
<td>enum</td>
<td>The type of coupon code that should be used to render the <code>coupon_code</code> value (<code>raw</code>, <code>qrcode</code>, <code>barcode39</code>, <code>barcode39extended</code>, <code>barcode93</code>, <code>barcode128</code>, <code>barcode_upc_a</code>, <code>barcode_ean_8</code>, <code>barcode_ean_13</code>, <code>barcode25interleaved</code>)</td>
</tr>
<tr>
<td><code>coupon_code.display</code></td>
<td>string</td>
<td>If set, should be displayed instead of the raw coupon code value</td>
</tr>
<tr>
<td><code>redemption_venue</code></td>
<td>enum</td>
<td>The venue the reward can be redeemed on (<code>all</code>, <code>instore</code>, <code>online</code>)</td>
</tr>
<tr>
<td><code>fine_print</code></td>
<td>string</td>
<td>Fine print for the reward</td>
</tr>
<tr>
<td><code>instructions</code></td>
<td>string</td>
<td>Staff instructions for the reward</td>
</tr>
<tr>
<td><code>activated_at</code></td>
<td>string</td>
<td>Time the reward was activated in ISO8601-format</td>
</tr>
<tr>
<td><code>finalized_at</code></td>
<td>string</td>
<td>Time the reward was finalized in ISO8601-format</td>
</tr>
<tr>
<td><code>retire_at</code></td>
<td>string</td>
<td>Time the reward will be automatically retired in ISO8601-format</td>
</tr>
</tbody></table>
<h2 id='activate-reward'>Activate Reward</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/rewards/222441e34626/actions/activate <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"reward"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"222441e34626"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"program_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85133c3c1258"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signing up"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"redeem"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$10 off"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"window"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"redemption_venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fine_print"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example reward fine print"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example staff instructions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"activated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retire_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalized_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint activates the reward, transitioning reward state from <code>delivered</code>
to <code>active</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /rewards/:id/actions/activate</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Reward ID</td>
</tr>
<tr>
<td><code>program_id</code></td>
<td>string</td>
<td>Program ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Reward State (<code>delivered</code>, <code>active</code>, <code>finalized</code>)</td>
</tr>
<tr>
<td><code>earn</code></td>
<td>hash</td>
<td>Details of how the reward was earned</td>
</tr>
<tr>
<td><code>earn.type</code></td>
<td>enum</td>
<td>Type of program the reward was earned with</td>
</tr>
<tr>
<td><code>earn.text</code></td>
<td>string</td>
<td>Description of how the reward was earned</td>
</tr>
<tr>
<td><code>redeem</code></td>
<td>hash</td>
<td>Details of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.type</code></td>
<td>enum</td>
<td>How the reward can be redeemed (<code>manual</code>, <code>automatic</code>, <code>multiple</code>)</td>
</tr>
<tr>
<td><code>redeem.text</code></td>
<td>string</td>
<td>Description of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.window</code></td>
<td>integer</td>
<td>Number of minutes the reward is available for use after activation</td>
</tr>
<tr>
<td><code>coupon_code.code</code></td>
<td>string</td>
<td>The raw coupon code value that should be rendered based on the <code>coupon_code_type</code> enum</td>
</tr>
<tr>
<td><code>coupon_code.type</code></td>
<td>enum</td>
<td>The type of coupon code that should be used to render the <code>coupon_code</code> value (<code>raw</code>, <code>qrcode</code>, <code>barcode39</code>, <code>barcode39extended</code>, <code>barcode93</code>, <code>barcode128</code>, <code>barcode_upc_a</code>, <code>barcode_ean_8</code>, <code>barcode_ean_13</code>, <code>barcode25interleaved</code>)</td>
</tr>
<tr>
<td><code>coupon_code.display</code></td>
<td>string</td>
<td>If set, should be displayed instead of the raw coupon code value</td>
</tr>
<tr>
<td><code>redemption_venue</code></td>
<td>enum</td>
<td>The venue the reward can be redeemed on (<code>all</code>, <code>instore</code>, <code>online</code>)</td>
</tr>
<tr>
<td><code>fine_print</code></td>
<td>string</td>
<td>Fine print for the reward</td>
</tr>
<tr>
<td><code>instructions</code></td>
<td>string</td>
<td>Staff instructions for the reward</td>
</tr>
<tr>
<td><code>activated_at</code></td>
<td>string</td>
<td>Time the reward was activated in ISO8601-format</td>
</tr>
<tr>
<td><code>finalized_at</code></td>
<td>string</td>
<td>Time the reward was finalized in ISO8601-format</td>
</tr>
<tr>
<td><code>retire_at</code></td>
<td>string</td>
<td>Time the reward will be automatically retired in ISO8601-format</td>
</tr>
</tbody></table>
<h2 id='finalize-reward'>Finalize Reward</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/rewards/222441e34626/actions/finalize <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"reward"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"222441e34626"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"program_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"85133c3c1258"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"earn"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"intro"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signing up"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"redeem"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$10 off"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"window"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"redemption_venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fine_print"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example reward fine print"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example staff instructions"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"activated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retire_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalized_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint marks an active reward as finalized, transitioning reward state from
<code>active</code> to <code>finalized</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /rewards/:id/actions/finalize</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>id</code></td>
<td>string</td>
<td>Reward ID</td>
</tr>
<tr>
<td><code>program_id</code></td>
<td>string</td>
<td>Program ID</td>
</tr>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Reward State (<code>delivered</code>, <code>active</code>, <code>finalized</code>)</td>
</tr>
<tr>
<td><code>earn</code></td>
<td>hash</td>
<td>Details of how the reward was earned</td>
</tr>
<tr>
<td><code>earn.type</code></td>
<td>enum</td>
<td>Type of program the reward was earned with</td>
</tr>
<tr>
<td><code>earn.text</code></td>
<td>string</td>
<td>Description of how the reward was earned</td>
</tr>
<tr>
<td><code>redeem</code></td>
<td>hash</td>
<td>Details of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.type</code></td>
<td>enum</td>
<td>How the reward can be redeemed (<code>manual</code>, <code>automatic</code>, <code>multiple</code>)</td>
</tr>
<tr>
<td><code>redeem.text</code></td>
<td>string</td>
<td>Description of how the reward can be redeemed</td>
</tr>
<tr>
<td><code>redeem.window</code></td>
<td>integer</td>
<td>Number of minutes the reward is available for use after activation</td>
</tr>
<tr>
<td><code>coupon_code.code</code></td>
<td>string</td>
<td>The raw coupon code value that should be rendered based on the <code>coupon_code_type</code> enum</td>
</tr>
<tr>
<td><code>coupon_code.type</code></td>
<td>enum</td>
<td>The type of coupon code that should be used to render the <code>coupon_code</code> value (<code>raw</code>, <code>qrcode</code>, <code>barcode39</code>, <code>barcode39extended</code>, <code>barcode93</code>, <code>barcode128</code>, <code>barcode_upc_a</code>, <code>barcode_ean_8</code>, <code>barcode_ean_13</code>, <code>barcode25interleaved</code>)</td>
</tr>
<tr>
<td><code>coupon_code.display</code></td>
<td>string</td>
<td>If set, should be displayed instead of the raw coupon code value</td>
</tr>
<tr>
<td><code>redemption_venue</code></td>
<td>enum</td>
<td>The venue the reward can be redeemed on (<code>all</code>, <code>instore</code>, <code>online</code>)</td>
</tr>
<tr>
<td><code>fine_print</code></td>
<td>string</td>
<td>Fine print for the reward</td>
</tr>
<tr>
<td><code>instructions</code></td>
<td>string</td>
<td>Staff instructions for the reward</td>
</tr>
<tr>
<td><code>activated_at</code></td>
<td>string</td>
<td>Time the reward was activated in ISO8601-format</td>
</tr>
<tr>
<td><code>finalized_at</code></td>
<td>string</td>
<td>Time the reward was finalized in ISO8601-format</td>
</tr>
<tr>
<td><code>retire_at</code></td>
<td>string</td>
<td>Time the reward will be automatically retired in ISO8601-format</td>
</tr>
</tbody></table>
<h2 id='describe-loyalty'>Describe Loyalty</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/loyalty <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"loyalty"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"earn_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spend $50 more"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"redeem_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$10 off your next purchase"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fine_print"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example fine print"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes the user&#39;s current loyalty status</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /loyalty</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>progress</code></td>
<td>integer</td>
<td>Current loyalty progress (0-100)</td>
</tr>
<tr>
<td><code>earn_text</code></td>
<td>string</td>
<td>Description of what the user needs to do in order to earn the loyalty reward</td>
</tr>
<tr>
<td><code>redeem_text</code></td>
<td>string</td>
<td>Description of what the user will receive as their next loyalty reward</td>
</tr>
<tr>
<td><code>fine_print</code></td>
<td>string</td>
<td>Loyalty program fine print</td>
</tr>
</tbody></table>
<h2 id='describe-tiers'>Describe Tiers</h2><pre class="highlight shell"><code>curl https://api-v3.thanxsandbox.com/tiers <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 945148251b603ae34561d90acfe4050e67494d6d1e65d4d3d52798407f03c0bd"</span>
</code></pre>
<blockquote>
<p>Response (200 OK)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1f0772c9ac"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bronze"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"action_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spend $100 before the end of the year to earn Silver."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-01T20:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"current_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bronze"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"next_tier_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Silver"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint describes the user&#39;s current tier status</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /tiers</code></p>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>merchant_id</code></td>
<td>string</td>
<td>Merchant ID</td>
</tr>
<tr>
<td><code>state</code></td>
<td>enum</td>
<td>Current tier state (<code>bronze</code>, <code>silver</code>, <code>gold</code>)</td>
</tr>
<tr>
<td><code>action_text</code></td>
<td>string</td>
<td>Description of what the user needs to do in order to earn the next tier</td>
</tr>
<tr>
<td><code>progress</code></td>
<td>integer</td>
<td>Progress percent toward the next tier (0-99)</td>
</tr>
<tr>
<td><code>expired_at</code></td>
<td>string</td>
<td>Current tier status expiration in ISO8601-format</td>
</tr>
<tr>
<td><code>current_tier_name</code></td>
<td>string</td>
<td>Name of current tier</td>
</tr>
<tr>
<td><code>next_tier_name</code></td>
<td>string</td>
<td>Name of next tier</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="curl">curl</a>
          </div>
      </div>
    </div>
  </body>
</html>
